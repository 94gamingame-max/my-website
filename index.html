import React, { useState, useRef } from 'react';
import { Heart, Shield, DollarSign, Activity, ChevronRight, RefreshCw, Share2, AlertTriangle, Gift, MessageCircle, Zap, Ticket } from 'lucide-react';

const SwoonTest = () => {
  const [step, setStep] = useState('intro'); // intro, question, calculating, result, wheel, prize
  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [score, setScore] = useState(0);
  const [resultData, setResultData] = useState(null);
  const [isSpinning, setIsSpinning] = useState(false);
  const [rotation, setRotation] = useState(0);
  const [prize, setPrize] = useState(null);

  // è¼ªç›¤çå“è¨­å®š
  const prizes = [
    { id: 1, name: "å†ä¾†ä¸€æ¬¡", icon: "ğŸ¤¡", color: "#64748b", probability: 0.2 }, // 20%
    { id: 2, name: "æ»·å‘³æ‹¼ç›¤", icon: "ğŸ¢", color: "#f59e0b", probability: 0.3 }, // 30%
    { id: 3, name: "ä¸€æ‰‹å•¤é…’", icon: "ğŸº", color: "#3b82f6", probability: 0.2 }, // 20%
    { id: 4, name: "èƒ–è€çˆ¹", icon: "ğŸ—", color: "#ef4444", probability: 0.3 },   // 30%
  ];

  // é¡Œç›®è¨­è¨ˆ
  const questions = [
    {
      id: 1,
      title: "è¨Šæ¯è½Ÿç‚¸",
      desc: "æ·±å¤œä¸‹ç­ï¼Œèº«å¿ƒä¿±ç–²çš„ä½ çœ‹åˆ°å“ªå‰‡è¨Šæ¯æœƒç¬é–“ã€Œå¿ƒè·³æ¼ä¸€æ‹ã€ï¼Ÿ",
      icon: <MessageCircle className="w-8 h-8 text-purple-400" />,
      options: [
        { text: "é€™å¼µå¡çµ¦ä½ ï¼Œæƒ³è²·ä»€éº¼è‡ªå·±å»åˆ·ï¼Œåˆ¥çœã€‚", score: 10, icon: "ğŸ’³" },
        { text: "æˆ‘çŸ¥é“ä½ ä»Šå¤©å—å§”å±ˆäº†ï¼Œæ²’äº‹ï¼Œæˆ‘åœ¨ã€‚", score: 30, icon: "ğŸ«‚" },
        { text: "ä½ åœ¨å“ªï¼Ÿæˆ‘ç¾åœ¨éå»æ¥ä½ ï¼Œé€™æ™‚é–“ä¸å®‰å…¨ã€‚", score: 20, icon: "ğŸš—" },
        { text: "åœ¨æ‰€æœ‰äººé¢å‰æˆ‘éƒ½åœ¨è£ï¼Œåªæœ‰å°ä½ æ˜¯çœŸçš„ã€‚", score: 40, icon: "ğŸ”’" }
      ]
    },
    {
      id: 2,
      title: "é—œéµæ™‚åˆ»",
      desc: "ç•¶ä½ å–é†‰åœ¨è·¯é‚Šåï¼Œå°æ–¹çš„å“ªå€‹èˆ‰å‹•æœƒè®“ä½ å¾¹åº•æ·ªé™·ï¼Ÿ",
      icon: <Activity className="w-8 h-8 text-red-400" />,
      options: [
        { text: "äºŒè©±ä¸èªªï¼Œç›´æ¥è½‰äº†ä¸€ç­†éŒ¢è®“ä½ æ˜å¤©å»æŒ‰æ‘©ã€‚", score: 10, icon: "ğŸ’°" },
        { text: "éœ¸æ°£åœ°æ“‹é–‹è·¯äººï¼ŒæŠŠå¤–å¥—æŠ«åœ¨ä½ èº«ä¸Šèªªã€Œè·Ÿæˆ‘èµ°ã€ã€‚", score: 20, icon: "ğŸ§¥" },
        { text: "ä¸å«Œé«’ï¼Œé»˜é»˜å¹«ä½ æ“¦å˜´ã€æ‹èƒŒï¼Œçœ¼ç¥è¶…å¿ƒç–¼ã€‚", score: 30, icon: "ğŸ¥º" },
        { text: "ç«Ÿç„¶é™ªè‘—ä½ ä¸€èµ·å“­ï¼Œèªªã€Œæˆ‘ä¸æ¨å¾—ä½ é€™éº¼è¾›è‹¦ã€ã€‚", score: 40, icon: "ğŸ˜­" }
      ]
    },
    {
      id: 3,
      title: "ç¦®ç‰©æ”»å‹¢",
      desc: "ç”Ÿæ—¥åˆ°äº†ï¼Œä»–/å¥¹é€å“ªç¨®ç¦®ç‰©æœƒè®“ä½ è¦ºå¾—ã€Œå°±æ˜¯é€™å€‹äººäº†ã€ï¼Ÿ",
      icon: <Gift className="w-8 h-8 text-pink-400" />,
      options: [
        { text: "ä½ éš¨å£æéæƒ³è¦çš„å°å»¢ç‰©ï¼Œå°æ–¹ç«Ÿç„¶è¨˜ä½ä¸¦è²·ä¾†äº†ã€‚", score: 30, icon: "ğŸ" },
        { text: "æœ€æ–°çš„ iPhone æˆ–æ˜¯ç›´æ¥çµ¦ä½ ä¸€å€‹åç‰ŒåŒ…ã€‚", score: 10, icon: "ğŸ‘œ" },
        { text: "è¦ªæ‰‹åšçš„ç›¸å†Šï¼Œè£¡é¢å…¨æ˜¯ä½ å€‘çš„åˆç…§ã€‚", score: 40, icon: "ğŸ“¸" },
        { text: "å¸¶ä½ å»é«˜ç´šé¤å»³ï¼Œå¹«ä½ å‰è¦/å¤¾èœã€æœå‹™å¾—ç„¡å¾®ä¸è‡³ã€‚", score: 20, icon: "ğŸ½ï¸" }
      ]
    },
    {
      id: 4,
      title: "è‡´å‘½ç´…ç‡ˆ",
      desc: "å¦‚æœå°æ–¹æ˜¯ä¸€å€‹å¤§å®¶å…¬èªçš„ã€Œæ¸£ç”·/æ¸£å¥³ã€ï¼Œå°æ–¹èªªä»€éº¼è©±ä½ æœƒé¸æ“‡åŸè«’ï¼Ÿ",
      icon: <AlertTriangle className="w-8 h-8 text-yellow-400" />,
      options: [
        { text: "ã€Œåªè¦ä½ ä¸é›¢é–‹æˆ‘ï¼Œä½ è¦ä»€éº¼æˆ‘éƒ½è²·çµ¦ä½ ã€‚ã€", score: 10, icon: "ğŸ’" },
        { text: "ã€Œé‡åˆ°ä½ ä¹‹å¾Œï¼Œæˆ‘æ‰æƒ³å®‰å®šä¸‹ä¾†ï¼Œä½ æ˜¯æˆ‘çš„ä¾‹å¤–ã€‚ã€", score: 40, icon: "ğŸ’˜" },
        { text: "ã€Œå…¶å¯¦æˆ‘å¾ˆå­¤å–®ï¼Œæ²’äººçœŸæ­£äº†è§£æˆ‘çš„å…§å¿ƒã€‚ã€", score: 30, icon: "ğŸ¥€" },
        { text: "ã€Œèª°æ•¢æ¬ºè² ä½ ï¼Ÿå ±æˆ‘çš„åå­—ï¼Œæˆ‘å¹«ä½ è™•ç†ã€‚ã€", score: 20, icon: "ğŸ‘Š" }
      ]
    }
  ];

  const getResult = (totalScore) => {
    if (totalScore <= 60) {
      return {
        type: "å‹™å¯¦çš„è³é‡‘çµäºº",
        badge: "äººé–“æ¸…é†’",
        scoreDisp: "15%",
        desc: "ä½ æ—©å°±éäº†è€³è½æ„›æƒ…çš„å¹´ç´€ã€‚ç”œè¨€èœœèªå°ä½ ä¾†èªªæ˜¯å»¢è©±ï¼Œä½ åªç›¸ä¿¡ã€Œçœ‹å¾—è¦‹çš„ä»˜å‡ºã€å’Œã€Œå…¥è¢‹çš„ç¾é‡‘ã€ã€‚",
        warning: "å°å¿ƒå› ç‚ºç¿’æ…£å°æ–¹çš„ç‰©è³ªç…§é¡§è€Œé›¢ä¸é–‹ï¼Œåˆ†ä¸æ¸…æ˜¯æ„›éŒ¢é‚„æ˜¯æ„›äººã€‚",
        color: "from-yellow-500 to-amber-700",
        icon: <DollarSign className="w-16 h-16 text-yellow-200" />
      };
    } else if (totalScore <= 90) {
      return {
        type: "å‚²å¬Œçš„å°å…¬ä¸»/ç‹å­",
        badge: "éœ¸é“ç¸½è£æ§",
        scoreDisp: "50%",
        desc: "ä½ å¹³å¸¸ç¨ç«‹æ…£äº†ï¼Œä»€éº¼äº‹éƒ½è‡ªå·±æ‰›ã€‚æ‰€ä»¥ç•¶æœ‰äººå¼·å‹¢åœ°ä»‹å…¥ä½ çš„ç”Ÿæ´»èªªè¦ã€Œä¿è­·ä½ /ç½©ä½ ã€æ™‚ï¼Œä½ çš„é˜²ç·šæœƒç¬é–“å´©å¡Œã€‚",
        warning: "ä½ å®¹æ˜“æ„›ä¸Šå¤§ç”·äºº/å¤§å¥³äººã€‚å°å¿ƒï¼Œæ§åˆ¶ç‹‚ä¸€é–‹å§‹éƒ½åŒ…è£å¾—å¾ˆåƒä¿é‘£ã€‚",
        color: "from-blue-500 to-indigo-700",
        icon: <Shield className="w-16 h-16 text-blue-200" />
      };
    } else if (totalScore <= 130) {
      return {
        type: "ç¼ºæ„›çš„éˆé­‚ä¼´ä¾¶",
        badge: "ç´°ç¯€æ§",
        scoreDisp: "85%",
        desc: "ä½ å¤–è¡¨çœ‹èµ·ä¾†å¾ˆå …å¼·ï¼Œå…¶å¯¦å…§å¿ƒæ¥µåº¦æ¸´æœ›ã€Œè¢«ç†è§£ã€ã€‚ä½ ä¸åœ¨ä¹å°æ–¹æœ‰æ²’æœ‰éŒ¢ï¼Œåªåœ¨ä¹ä»–è¨˜ä¸è¨˜å¾—ä½ ä¸åƒè”¥ã€æ‡‚ä¸æ‡‚ä½ çš„æ¢—ã€‚",
        warning: "ä½ æ˜¯æ¸£ç”·/æ¸£å¥³çš„æœ€æ„›ã€‚åªè¦å°æ–¹ç¨å¾®å±•ç¾ä¸€é»è€å¿ƒè½ä½ èªªè©±ï¼Œä½ å°±æœƒè¦ºå¾—ã€Œä»–æ˜¯æˆ‘çš„æ•‘è´–ã€ã€‚",
        color: "from-pink-500 to-rose-700",
        icon: <Heart className="w-16 h-16 text-pink-200" />
      };
    } else {
      return {
        type: "è–æ¯å¿ƒæ°¾æ¿«æ•‘ä¸–ä¸»",
        badge: "æ ¸å½ˆç´šæˆ€æ„›è…¦",
        scoreDisp: "200%",
        desc: "æ­å–œä½ ï¼ä½ æ˜¯å…«å¤§è¡Œæ¥­æœ€å®¹æ˜“ã€Œè³ äº†å¤«äººåˆæŠ˜å…µã€çš„é¡å‹ï¼ä½ å°å¼·è€…ç„¡æ„Ÿï¼Œä½†å°ã€Œå—å‚·çš„å°ç‹—ã€æˆ–ã€Œæµªå­å›é ­ã€æ¯«ç„¡æŠµæŠ—åŠ›ã€‚",
        warning: "é†’é†’å§ï¼ä»–åœ¨åˆ¥çš„å±€ä¹Ÿæ˜¯é€™æ¨£è¬›çš„ï¼ä½ çš„åŒæƒ…å¿ƒæœƒå®³æ­»ä½ è‡ªå·±ã€‚",
        color: "from-red-600 to-red-900",
        icon: <Activity className="w-16 h-16 text-red-200" />
      };
    }
  };

  const handleAnswer = (points) => {
    const newScore = score + points;
    setScore(newScore);

    if (currentQuestion < questions.length - 1) {
      setCurrentQuestion(currentQuestion + 1);
    } else {
      setStep('calculating');
      setTimeout(() => {
        setResultData(getResult(newScore));
        setStep('result');
      }, 2000);
    }
  };

  // æŠ½çé‚è¼¯
  const spinWheel = () => {
    if (isSpinning) return;
    setIsSpinning(true);

    // éš¨æ©Ÿæ±ºå®šçå“ (åŠ æ¬Šé‡)
    const rand = Math.random();
    let cumulativeProbability = 0;
    let selectedPrize = prizes[0];

    for (const p of prizes) {
      cumulativeProbability += p.probability;
      if (rand <= cumulativeProbability) {
        selectedPrize = p;
        break;
      }
    }

    // è¨ˆç®—æ—‹è½‰è§’åº¦
    // æ¯å€‹çå“ä½” 90 åº¦ (360/4)
    // çå“ç´¢å¼•: 0, 1, 2, 3
    // éœ€è¦è½‰å¾ˆå¤šåœˆ (360 * 5) + çå“å°æ‡‰çš„è§’åº¦
    const segmentAngle = 360 / prizes.length;
    // ç‚ºäº†è®“æŒ‡é‡æŒ‡åˆ°ä¸­é–“ï¼Œéœ€è¦ offset
    const prizeIndex = prizes.indexOf(selectedPrize);
    
    // ä¿®æ­£è§’åº¦è¨ˆç®—ï¼Œè®“æŒ‡é‡æŒ‡å‘ä¸Šæ–¹
    // å‡è¨­æŒ‡é‡åœ¨ä¸Šæ–¹(0åº¦)ï¼Œè¼ªç›¤é †æ™‚é‡è½‰
    const targetAngle = 360 * 6 + (360 - (prizeIndex * segmentAngle)); 
    
    setRotation(targetAngle);

    setTimeout(() => {
      setPrize(selectedPrize);
      setIsSpinning(false);
      setStep('prize');
    }, 4000); // é…åˆ CSS transition æ™‚é–“
  };

  const resetTest = () => {
    setStep('intro');
    setCurrentQuestion(0);
    setScore(0);
    setResultData(null);
    setRotation(0);
    setPrize(null);
  };

  return (
    <div className="min-h-screen bg-slate-900 text-white flex items-center justify-center p-4 font-sans relative overflow-hidden">
      {/* Background Ambience */}
      <div className="absolute top-0 left-0 w-full h-full opacity-20 pointer-events-none">
        <div className="absolute top-[-10%] left-[-10%] w-96 h-96 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl animate-blob"></div>
        <div className="absolute top-[-10%] right-[-10%] w-96 h-96 bg-pink-600 rounded-full mix-blend-multiply filter blur-3xl animate-blob animation-delay-2000"></div>
        <div className="absolute bottom-[-20%] left-[20%] w-96 h-96 bg-indigo-600 rounded-full mix-blend-multiply filter blur-3xl animate-blob animation-delay-4000"></div>
      </div>

      <div className="max-w-md w-full bg-slate-800/80 backdrop-blur-xl rounded-2xl shadow-2xl border border-slate-700 overflow-hidden relative z-10 min-h-[550px] flex flex-col">
        
        {/* Header */}
        <div className="bg-slate-900/50 p-4 text-center border-b border-slate-700 flex justify-between items-center h-14">
          <span className="text-xs font-bold text-slate-500 tracking-widest">å…«å¤§å¿ƒç†å¯¦é©—å®¤</span>
          {step === 'question' && (
            <span className="text-xs font-bold text-pink-400 bg-pink-400/10 px-2 py-1 rounded-full">
              Q {currentQuestion + 1} / {questions.length}
            </span>
          )}
          {(step === 'result' || step === 'prize') && (
            <span className="text-xs font-bold text-yellow-400 bg-yellow-400/10 px-2 py-1 rounded-full flex items-center gap-1">
              <Ticket size={12}/> å¥½åº·å€
            </span>
          )}
        </div>

        {/* Content Area */}
        <div className="p-6 flex-1 flex flex-col justify-center relative overflow-hidden">
          
          {step === 'intro' && (
            <div className="space-y-8 animate-fadeIn text-center">
              <div className="relative inline-block">
                <div className="absolute inset-0 bg-pink-500 blur-xl opacity-20 rounded-full"></div>
                <div className="relative p-4 bg-slate-800 border border-slate-600 rounded-2xl mb-2">
                  <Heart className="w-12 h-12 text-pink-500 animate-pulse" />
                </div>
              </div>
              
              <div className="space-y-2">
                <h2 className="text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400">
                  æšˆèˆ¹é«”è³ªæª¢æ¸¬
                </h2>
                <p className="text-slate-300 leading-relaxed text-sm px-4">
                  ä½ æ˜¯æ­¡å ´è£¡æœ€æ¸…é†’çš„çµäººï¼Œ<br/>é‚„æ˜¯æœ€å®¹æ˜“å—å‚·çš„çµç‰©ï¼Ÿ<br/>
                  <span className="text-pink-400 font-bold mt-2 block">ğŸ æ¸¬å®Œé‚„æœ‰æ©ŸæœƒæŠ½ã€Œèƒ–è€çˆ¹ã€ï¼</span>
                </p>
              </div>

              <button 
                onClick={() => setStep('question')}
                className="w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl font-bold text-lg hover:opacity-90 transition-all flex items-center justify-center gap-2 shadow-lg shadow-purple-900/50 group"
              >
                é–‹å§‹æª¢æ¸¬ <ChevronRight className="group-hover:translate-x-1 transition-transform" />
              </button>
            </div>
          )}

          {step === 'question' && (
            <div className="space-y-6 animate-fadeIn">
              <div className="text-center space-y-4">
                <div className="inline-flex items-center justify-center w-12 h-12 rounded-full bg-slate-700 mb-2">
                  {questions[currentQuestion].icon}
                </div>
                <h3 className="text-xl font-bold text-white">
                  {questions[currentQuestion].title}
                </h3>
                <p className="text-slate-300 text-sm leading-relaxed min-h-[3rem]">
                  {questions[currentQuestion].desc}
                </p>
              </div>

              <div className="space-y-3">
                {questions[currentQuestion].options.map((option, index) => (
                  <button
                    key={index}
                    onClick={() => handleAnswer(option.score)}
                    className="w-full p-4 bg-slate-700/50 hover:bg-slate-600 border border-slate-600 hover:border-pink-500/50 rounded-xl text-left transition-all group flex items-start gap-4 active:scale-[0.98]"
                  >
                    <span className="text-xl pt-0.5">{option.icon}</span>
                    <span className="text-sm font-medium text-slate-200 group-hover:text-white leading-relaxed">
                      {option.text}
                    </span>
                  </button>
                ))}
              </div>
              
              <div className="w-full bg-slate-800 h-1.5 rounded-full overflow-hidden mt-6">
                <div 
                  className="bg-pink-500 h-full transition-all duration-300 ease-out"
                  style={{ width: `${((currentQuestion) / questions.length) * 100}%` }}
                ></div>
              </div>
            </div>
          )}

          {step === 'calculating' && (
            <div className="text-center space-y-6 animate-pulse flex flex-col items-center">
              <div className="relative">
                <div className="w-20 h-20 border-4 border-purple-500/30 border-t-purple-500 rounded-full animate-spin"></div>
                <div className="absolute inset-0 flex items-center justify-center text-2xl">ğŸ§ </div>
              </div>
              <div>
                <h3 className="text-xl font-bold text-white mb-2">æ­£åœ¨åˆ†æä½ çš„å¤§è…¦è¿´è·¯...</h3>
                <p className="text-slate-400 text-sm">æ¯”å° 10,000+ ç­†æšˆèˆ¹æ¡ˆä¾‹</p>
              </div>
            </div>
          )}

          {step === 'result' && resultData && (
            <div className="space-y-5 animate-fadeIn">
              <div className={`p-1 rounded-2xl bg-gradient-to-br ${resultData.color} shadow-xl shadow-black/50`}>
                <div className="bg-slate-900/95 p-5 rounded-xl text-center space-y-4 backdrop-blur-sm">
                  
                  <div className="inline-block px-3 py-1 rounded-full bg-white/10 border border-white/20 text-xs font-bold text-white mb-2">
                    {resultData.badge}
                  </div>
                  
                  <div className="flex justify-center py-2 animate-bounce-slow">
                    {resultData.icon}
                  </div>

                  <h2 className="text-2xl font-black text-white leading-tight">
                    {resultData.type}
                  </h2>
                  
                  <div className="py-2 flex flex-col justify-center items-center gap-1">
                    <span className="text-xs text-slate-400 uppercase tracking-wider">æšˆèˆ¹æŒ‡æ•¸</span>
                    <span className={`text-5xl font-black bg-gradient-to-r ${resultData.color} bg-clip-text text-transparent filter drop-shadow-lg`}>
                      {resultData.scoreDisp}
                    </span>
                  </div>

                  <p className="text-sm text-slate-300 leading-relaxed border-t border-slate-800 pt-4 text-justify">
                    {resultData.desc}
                  </p>
                </div>
              </div>

              {/* Call to Action for Wheel */}
              <button 
                onClick={() => setStep('wheel')}
                className="w-full py-4 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl font-bold text-lg text-slate-900 hover:scale-[1.02] transition-all flex items-center justify-center gap-2 shadow-lg shadow-orange-500/30 animate-pulse"
              >
                <Gift size={24} /> é ˜å–æšˆèˆ¹å®‰æ…°ç
              </button>
            </div>
          )}

          {step === 'wheel' && (
            <div className="flex flex-col items-center justify-center space-y-8 animate-fadeIn">
               <div className="text-center space-y-1">
                <h3 className="text-2xl font-black text-yellow-400">ğŸ è½‰é‹å¤§è¼ªç›¤</h3>
                <p className="text-slate-400 text-sm">çœ‹çœ‹ä»Šå¤©é‹æ°£èƒ½ä¸èƒ½è£œè²¼ä¸€é»é…’éŒ¢ï¼Ÿ</p>
               </div>

               {/* Wheel Container */}
               <div className="relative w-64 h-64">
                  {/* Indicator */}
                  <div className="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-4 z-20">
                    <div className="w-0 h-0 border-l-[15px] border-l-transparent border-r-[15px] border-r-transparent border-t-[30px] border-t-white drop-shadow-md"></div>
                  </div>

                  {/* Wheel */}
                  <div 
                    className="w-full h-full rounded-full border-4 border-slate-700 relative shadow-2xl overflow-hidden transition-transform duration-[4000ms] cubic-bezier(0.2, 0.8, 0.2, 1)"
                    style={{ 
                      transform: `rotate(${rotation}deg)`,
                      background: `conic-gradient(
                        ${prizes[0].color} 0% 25%, 
                        ${prizes[1].color} 25% 50%, 
                        ${prizes[2].color} 50% 75%, 
                        ${prizes[3].color} 75% 100%
                      )`
                    }}
                  >
                    {/* Prize Text Segments - Simplified visualization for CSS only */}
                    {prizes.map((p, i) => (
                      <div 
                        key={p.id}
                        className="absolute w-full h-full top-0 left-0 flex justify-center pt-8"
                        style={{ transform: `rotate(${i * 90 + 45}deg)` }}
                      >
                         <div className="text-2xl drop-shadow-md transform -rotate-45">{p.icon}</div>
                      </div>
                    ))}
                  </div>

                  {/* Center Knob */}
                  <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-12 h-12 bg-white rounded-full shadow-lg z-10 flex items-center justify-center border-4 border-slate-200">
                    <div className="w-full h-full rounded-full bg-slate-900/10"></div>
                  </div>
               </div>

               <button 
                  onClick={spinWheel}
                  disabled={isSpinning}
                  className={`w-full py-4 rounded-xl font-bold text-xl transition-all shadow-lg ${isSpinning ? 'bg-slate-700 text-slate-500 cursor-not-allowed' : 'bg-gradient-to-r from-yellow-400 to-orange-500 text-slate-900 hover:scale-[1.02] shadow-orange-500/30'}`}
                >
                  {isSpinning ? 'ç¥ˆç¦±ä¸­...' : 'é–‹å§‹æŠ½çï¼'}
               </button>
            </div>
          )}

          {step === 'prize' && prize && (
            <div className="space-y-6 animate-fadeIn text-center">
              <div className="relative inline-block">
                <div className="absolute inset-0 bg-yellow-500 blur-2xl opacity-40 rounded-full animate-pulse"></div>
                <div className="relative p-6 bg-slate-800 border-2 border-yellow-400 rounded-3xl mb-4 shadow-2xl transform hover:scale-105 transition-transform">
                  <div className="text-6xl mb-4 animate-bounce">{prize.icon}</div>
                  <h3 className="text-sm text-yellow-500 font-bold tracking-widest uppercase mb-1">æ­å–œç²å¾—</h3>
                  <h2 className="text-3xl font-black text-white">{prize.name}</h2>
                </div>
              </div>

              <div className="space-y-4 bg-slate-800/50 p-6 rounded-2xl border border-slate-700">
                <p className="text-slate-300 leading-relaxed text-sm">
                  {prize.name === 'å†ä¾†ä¸€æ¬¡' 
                    ? 'å“å‘€ï¼çœ‹ä¾†ä½ çš„é‹æ°£éƒ½ç”¨åœ¨æšˆèˆ¹ä¸Šäº†... ä½†åˆ¥ç°å¿ƒï¼Œæˆªåœ–å‚³çµ¦æˆ‘ï¼Œæˆ‘ä¹Ÿè¨±å¿ƒæƒ…å¥½è«‹ä½ å–ä¸€æ¯ï¼' 
                    : `é‹æ°£çˆ†æ£šï¼å¿«æŠŠé€™å€‹ç•«é¢æˆªåœ–ä¸‹ä¾†ï¼Œä¸‹æ¬¡ä¾†åº—è£¡æ‰¾æˆ‘å…Œæ›ã€Œ${prize.name}ã€ï¼`}
                </p>
                
                <div className="flex flex-col gap-2">
                   <div className="flex items-center gap-2 text-xs text-slate-500 justify-center">
                      <Zap size={14} /> é™æ™‚ 24 å°æ™‚å…§å…Œæ›æœ‰æ•ˆ
                   </div>
                   <div className="flex items-center gap-2 text-xs text-slate-500 justify-center">
                      <Ticket size={14} /> éœ€å‡ºç¤ºè¿½è¹¤ç•«é¢
                   </div>
                </div>
              </div>

              <div className="flex gap-3 pt-2">
                <button 
                  onClick={resetTest}
                  className="flex-1 py-3 bg-slate-800 border border-slate-700 rounded-xl font-medium hover:bg-slate-700 transition-colors flex items-center justify-center gap-2 text-sm text-slate-300"
                >
                  <RefreshCw size={16} /> é‡ç©ä¸€æ¬¡
                </button>
                <button 
                  className="flex-1 py-3 bg-gradient-to-r from-pink-600 to-purple-600 rounded-xl font-medium hover:opacity-90 transition-colors flex items-center justify-center gap-2 text-sm text-white shadow-lg shadow-purple-900/30"
                  onClick={() => alert("è¨˜å¾—æˆªåœ–å‚³ç§è¨Šçµ¦æˆ‘å–”ï¼")}
                >
                  <Share2 size={16} /> æˆªåœ–å…Œæ›
                </button>
              </div>
            </div>
          )}
        </div>
        
        {/* Footer */}
        <div className="p-3 text-center text-[10px] text-slate-600 border-t border-slate-800">
          å…«å¤§ç”Ÿå­˜æ³•å‰‡å¯¦é©—å®¤ â€¢ åƒ…ä¾›å¨›æ¨‚ â€¢ {step === 'wheel' ? 'å¥½é‹è¼ªç›¤' : 'å¿ƒç†æ¸¬é©—'}
        </div>
      </div>
    </div>
  );
};

export default SwoonTest;